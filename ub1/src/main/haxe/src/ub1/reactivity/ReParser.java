// Generated by Haxe 4.1.5
package ub1.reactivity;

import haxe.root.*;

@SuppressWarnings(value={"rawtypes", "unchecked"})
public class ReParser extends haxe.lang.HxObject
{
	static
	{
		//line 68 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		{
			//line 69 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			ub1.reactivity.ReParser.parser = new hscript.Parser();
			//line 70 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			ub1.reactivity.ReParser.parser.allowJSON = true;
		}
		
		//line 9 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		ub1.reactivity.ReParser.E1 = "[[";
		//line 10 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		ub1.reactivity.ReParser.E2 = "]]";
		//line 64 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		ub1.reactivity.ReParser.BLOCK_PREFIX = ( "__nn__" + "(" );
		//line 65 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		ub1.reactivity.ReParser.BLOCK_SUFFIX = ")";
	}
	
	public ReParser(haxe.lang.EmptyObject empty)
	{
	}
	
	
	public ReParser()
	{
		//line 8 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		ub1.reactivity.ReParser.__hx_ctor_ub1_reactivity_ReParser(this);
	}
	
	
	protected static void __hx_ctor_ub1_reactivity_ReParser(ub1.reactivity.ReParser __hx_this)
	{
	}
	
	
	public static java.lang.String E1;
	
	public static java.lang.String E2;
	
	public static boolean isDynamic(java.lang.String s)
	{
		//line 16 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		int i1 = haxe.lang.StringExt.indexOf(s, "[[", null);
		//line 17 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		int i2 = ( (( i1 < 0 )) ? (-1) : (haxe.lang.StringExt.indexOf(s, "]]", ( i1 + 2 ))) );
		//line 18 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		if (( i1 >= 0 )) 
		{
			//line 18 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			return ( i2 > i1 );
		}
		else
		{
			//line 18 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			return false;
		}
		
	}
	
	
	public static java.lang.Object parse(java.lang.String s, java.lang.String origin)
	{
		//line 22 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		java.lang.String code = ub1.reactivity.ReParser.prepare(s);
		//line 23 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		java.lang.Object ret = ub1.reactivity.ReParser.parser.parseString(code, origin);
		//line 24 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		return ret;
	}
	
	
	public static java.lang.String prepare(java.lang.String s)
	{
		//line 29 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		haxe.root.StringBuf sb = new haxe.root.StringBuf();
		//line 30 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		java.lang.String sep = "";
		//line 31 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		java.lang.String exprStart = null;
		//line 31 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		java.lang.String exprEnd = null;
		//line 32 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		if (( ((java.lang.String) (((java.lang.Object) (s) )) ).startsWith(haxe.lang.Runtime.toString("[[")) && ((java.lang.String) (((java.lang.Object) (s) )) ).endsWith("]]") )) 
		{
			//line 33 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			exprEnd = "";
			//line 33 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			exprStart = exprEnd;
		}
		else
		{
			//line 35 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			exprStart = ( "__nn__" + "(" );
			//line 36 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			exprEnd = ")";
		}
		
		//line 38 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		int i = 0;
		//line 38 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		int i1 = 0;
		//line 38 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		int i2 = 0;
		//line 39 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		while (true)
		{
			//line 39 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			boolean tmp = false;
			//line 39 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			i1 = haxe.lang.StringExt.indexOf(s, "[[", i);
			//line 39 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			if (( i1 >= 0 )) 
			{
				//line 39 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
				i2 = haxe.lang.StringExt.indexOf(s, "]]", i1);
				//line 39 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
				tmp = ( i2 >= 0 );
			}
			else
			{
				//line 39 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
				tmp = false;
			}
			
			//line 39 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			if ( ! (tmp) ) 
			{
				//line 39 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
				break;
			}
			
			//line 40 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			while (( ( ( i2 + 2 ) < s.length() ) && haxe.lang.Runtime.valEq(haxe.lang.StringExt.charAt(s, ( i2 + 2 )), "]") ))
			{
				//line 40 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
				 ++ i2;
			}
			
			//line 41 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			sb.add(haxe.lang.Runtime.toString(sep));
			//line 41 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			java.lang.Object __temp_expr1 = ((java.lang.Object) (null) );
			//line 41 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			sep = "+";
			//line 42 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			if (( i1 > i )) 
			{
				//line 43 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
				java.lang.String s1 = haxe.lang.StringExt.substring(s, i, i1);
				//line 43 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
				sb.add(haxe.lang.Runtime.toString(( ( "\'" + new haxe.root.EReg("[\']", "g").replace(new haxe.root.EReg("[\"]", "g").replace(s1, "\\\""), "\\\'") ) + "\'+" )));
				//line 43 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
				java.lang.Object __temp_expr2 = ((java.lang.Object) (null) );
			}
			
			//line 45 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			sb.add(haxe.lang.Runtime.toString(exprStart));
			//line 45 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			java.lang.Object __temp_expr3 = ((java.lang.Object) (null) );
			//line 46 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			sb.add(haxe.lang.Runtime.toString(haxe.lang.StringExt.substring(s, ( i1 + "[[".length() ), i2)));
			//line 46 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			java.lang.Object __temp_expr4 = ((java.lang.Object) (null) );
			//line 47 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			sb.add(haxe.lang.Runtime.toString(exprEnd));
			//line 47 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			java.lang.Object __temp_expr5 = ((java.lang.Object) (null) );
			//line 48 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			i = ( i2 + "]]".length() );
		}
		
		//line 50 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		if (( ( i < s.length() ) || haxe.lang.Runtime.valEq(sep, "") )) 
		{
			//line 51 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			sb.add(haxe.lang.Runtime.toString(sep));
			//line 51 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			java.lang.Object __temp_expr6 = ((java.lang.Object) (null) );
			//line 52 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			java.lang.String s2 = haxe.lang.StringExt.substr(s, i, null);
			//line 52 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			sb.add(haxe.lang.Runtime.toString(( ( "\'" + new haxe.root.EReg("[\']", "g").replace(new haxe.root.EReg("[\"]", "g").replace(s2, "\\\""), "\\\'") ) + "\'" )));
			//line 52 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
			java.lang.Object __temp_expr7 = ((java.lang.Object) (null) );
		}
		
		//line 54 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		return sb.toString();
	}
	
	
	public static java.lang.String escape(java.lang.String s)
	{
		//line 58 "/Users/fabrizio/ubimate/oss/ub1/ub1-core/src/ub1/reactivity/ReParser.hx"
		return new haxe.root.EReg("[\']", "g").replace(new haxe.root.EReg("[\"]", "g").replace(s, "\\\""), "\\\'");
	}
	
	
	public static java.lang.String BLOCK_PREFIX;
	
	public static java.lang.String BLOCK_SUFFIX;
	
	public static hscript.Parser parser;
	
}


